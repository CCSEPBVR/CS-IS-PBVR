#*****************************************************************************
#  $Id: Makefile.$make 62 2009-03-19 06:58:44Z naohisa.sakamoto $
#*****************************************************************************

#=============================================================================
#  Include.
#=============================================================================
include ../pbvr.conf
include ../arch/$(PBVR_MACHINE)
include Makefile.def


#=============================================================================
#  INCLUDE_PATH, LIBRARY_PATH, LINK_LIBRARY, INSTALL_DIR.
#=============================================================================
INCLUDE_PATH :=
LIBRARY_PATH :=
LINK_LIBRARY :=
INSTALL_DIR  := ../$(KVS_DIR_NAME)


#=============================================================================
#  Sub directory.
#=============================================================================
SUBDIRS := Source


#=============================================================================
#  build.
#=============================================================================
build:
	for i in $(SUBDIRS); do \
	$(MAKE) -C $$i $(MFLAGS) $(MAKEOVERRIDES) build; done


#=============================================================================
#  clean.
#=============================================================================
clean:
	for i in $(SUBDIRS); do \
	$(MAKE) -C $$i $(MFLAGS) $(MAKEOVERRIDES) clean; done

all_clean:
	for i in $(SUBDIRS); do \
	$(MAKE) -C $$i $(MFLAGS) $(MAKEOVERRIDES) all_clean; done


#=============================================================================
#  install.
#=============================================================================
install:
	$(MKDIR) $(INSTALL_DIR)
	$(INSTALL) kvs.conf     $(INSTALL_DIR)
	$(INSTALL) Makefile.def $(INSTALL_DIR)
	for i in $(SUBDIRS); do \
	$(MAKE) -C $$i $(MFLAGS) $(MAKEOVERRIDES) install; done


#=============================================================================
#  uninstall.
#=============================================================================
uninstall:
	$(RMDIR) $(INSTALL_DIR)


#=============================================================================
#  reinstall.
#=============================================================================
reinstall: uninstall install
